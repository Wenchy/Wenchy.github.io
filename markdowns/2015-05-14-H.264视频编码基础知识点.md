H.264视频编码基础知识点
=====================
2015-05-14

## 编码的层次结构(Hierarchy)
![Hierarchy-of-video-coding](https://wenchy.github.io/images/2015-05-14-Hierarchy-of-video-coding.png)
![Video-coding-order](https://wenchy.github.io/images/2015-05-14-Video-coding-order.png)

## 码率控制 (RDO: Rate Distortion Optimization)
- 受到缓冲区，宽带的限制，编码码率不能无限制的增长，因此需要通过码率控制来将编码码流控制在目标码率范围内。
- 码率控制的主要环节： DCT变换，量化，缓冲区调整，分层编码(可分级编码和精细编码)，网络状况反馈调节编码。
- 一般通过调整量化参数QP的手段来控制码率：
    1. frame level
    2. slice level
    3. Macroblock level
- 码率控制考虑的问题：
    1. 防止码流有较大的波动，导致缓冲区溢出
    2. 同时保持缓冲区尽可能的充满，然图片质量尽可能的好而且稳定
- CBR (Constant Bit Rate), 比特率稳定，但图片质量变化大
- VBR (Variable Bit Rate) , 比特率波动大，但图片质量稳定
- 码率控制算法
    1. 码率分配
    2. 码率控制
- 码率控制属于非标准技术, 编码端有, 解码端没有

## Why 离散余弦变换（DCT）
- 相比K-L变换，傅里叶变换的复杂度更低
- 变换性能仅次于K-L变换
- 有快速算法可以加速变换速度
- 可以用整数变换进一步降低复杂度

## 编码质量评价标准
- 主观，用肉眼观察
- 客观指MSE和PSNR，通常认为PSNR平均值和最小PSNR值越大越好， 各帧间PSNR值变化越小越好

